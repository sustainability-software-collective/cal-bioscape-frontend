# Cloud Build Quick Reference

## Environment Configuration Summary

| Environment | File | Service Name | Branch |
|------------|------|--------------|--------|
| Development | `cloudbuild.yaml` | `cal-bioscape-frontend-dev` | any |
| Staging | `cloudbuild-staging.yaml` | `cal-bioscape-frontend-staging` | `staging` |
| Production | `cloudbuild-prod.yaml` | `cal-bioscape-frontend-prod` | `main` |

## Substitution Variables

Each file defines these at the top:
- `_SERVICE_NAME` - Cloud Run service name
- `_ENVIRONMENT` - Environment identifier
- `_REGION` - Deployment region

## Image Tags Generated

Every build creates:
1. `gcr.io/$PROJECT_ID/{service}:{git-sha}` - Immutable commit reference
2. `gcr.io/$PROJECT_ID/{service}:{env}-latest` - Latest for environment

## Quick Deploy Commands

**Staging:**
```bash
gcloud builds submit --config=cloudbuild-staging.yaml
```

**Production:**
```bash
gcloud builds submit --config=cloudbuild-prod.yaml
```

## Key Features

✅ Separate Cloud Run services per environment  
✅ Environment-specific configuration via substitutions  
✅ Dual tagging strategy (commit SHA + latest)  
✅ Environment variable injection  
✅ Secret Manager integration  

See `CLOUDBUILD.md` for full documentation.
